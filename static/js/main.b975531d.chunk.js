(this["webpackJsonpwould-you-rather-app"]=this["webpackJsonpwould-you-rather-app"]||[]).push([[0],{58:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n(22),a=n.n(s),r=(n(58),n(15)),c=n(16),i=n(18),u=n(17),l=n(21),j=n(9),d=n(10),b=n(4),h=n(2),O={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://s3.amazonaws.com/cms-assets.tutsplus.com/uploads/users/107/profiles/2394/profileImage/avatar-new400.jpg",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://external-preview.redd.it/8v3LkYRXddBkoqJkH_0OixpKyqcEOKqokxpDzAc2JYI.jpg?auto=webp&s=7348fcc4defdcfb5ca82553fcca8184061147d54",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://miro.medium.com/max/566/1*n-FPAObgPCDmxNKeGqyWvw.jpeg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},p={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function m(e){var t=e.optionOneText,n=e.optionTwoText,o=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:o,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}function v(e){return function(e){return new Promise((function(t,n){var o=e.author,s=m(e);setTimeout((function(){p=Object(h.a)(Object(h.a)({},p),{},Object(b.a)({},s.id,s)),console.log("user from api",O,o),O=Object(h.a)(Object(h.a)({},O),{},Object(b.a)({},o,Object(h.a)(Object(h.a)({},O[o]),{},{questions:O[o].questions.concat([s.id])}))),console.log("users updated",O,O[o]),t(s)}),1e3)}))}(e)}function x(e){return function(e){var t=e.authedUser,n=e.qid,o=e.answer;return new Promise((function(e,s){console.log("save answer",t,n,o),setTimeout((function(){O=Object(h.a)(Object(h.a)({},O),{},Object(b.a)({},t,Object(h.a)(Object(h.a)({},O[t]),{},{answers:Object(h.a)(Object(h.a)({},O[t].answers),{},Object(b.a)({},n,o))}))),console.log("user from api save answer",O,t),p=Object(h.a)(Object(h.a)({},p),{},Object(b.a)({},n,Object(h.a)(Object(h.a)({},p[n]),{},Object(b.a)({},o,Object(h.a)(Object(h.a)({},p[n][o]),{},{votes:p[n][o].votes.concat([t])}))))),e()}),500)}))}(e)}var f="GET_USERS";var w="GET_QUESTIONS",g="ADD_QUESTION",y="SAVE_QUESTIONS_ANSWER";function q(e,t){return function(n,o){var s=o();return console.log("USER:",s),v({optionOneText:e,optionTwoText:t,author:s.authedUser}).then((function(e){return n(function(e){return{type:g,question:e}}(e))}))}}function T(e,t,n){return console.log("answer",e),console.log("author",t),console.log("qid",n),function(o,s){s().authedUser;return x({authedUser:t,qid:n,answer:e}).then((function(){return o(function(e){return console.log("saveAnswer action",e),{type:y,answer:e}}({authedUser:t,qid:n,answer:e}))}))}}var N="SET_AUTHED_USER";var U=n(24),S=n.n(U);function k(){return function(e){return e(Object(U.showLoading)()),Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(h.a)({},O))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(h.a)({},p))}),1e3)}))]).then((function(e){var t=Object(d.a)(e,2);return{users:t[0],questions:t[1]}})).then((function(t){var n=t.users,o=t.questions;e(function(e){return{type:f,users:e}}(n)),e(function(e){return{type:w,questions:e}}(o)),e({type:N,id:"sarahedo"}),e(Object(U.hideLoading)())}))}}var R=n(44),C=n(11),z=n(1),A=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.optionOneText,n=e.isAnswered,o=e.user,s=e.question,a=(e.authedUser,t.text.slice(0,10)+"..."),r=o.name,c=o.avatarURL,i=s.id;return console.log("question",s),Object(z.jsxs)("div",{className:"question",children:[Object(z.jsx)("div",{children:Object(z.jsx)("div",{className:"results-authorName",children:Object(z.jsxs)("span",{children:[r," asks: "]})})}),Object(z.jsx)("div",{className:"board dashboard",children:Object(z.jsxs)("div",{className:"leaderboard-grid",children:[Object(z.jsx)("div",{className:"leaderboard-img",children:Object(z.jsx)("img",{src:c,alt:"Avatar of ".concat(r),className:"avatar"})}),Object(z.jsxs)("div",{className:"leaderboard-info",children:[Object(z.jsx)("h5",{children:"Would You Rather"}),Object(z.jsxs)("p",{children:["...",a]}),n?Object(z.jsx)(l.b,{to:"/results/".concat(i),children:Object(z.jsx)("button",{className:"btn",children:"View Poll"})}):Object(z.jsx)(l.b,{to:"/question/".concat(i),children:Object(z.jsx)("button",{className:"btn",children:"View Poll"})})]})]})})]})}}]),n}(o.Component);var E=Object(C.e)(Object(j.connect)((function(e,t){var n=e.authedUser,o=e.users,s=e.questions,a=s[t.id];console.log("refresh state questions",s);var r=a.optionOne;return a.optionTwo,{authedUser:n,optionOneText:r,isAnswered:a.optionOne.votes.includes(n)||a.optionTwo.votes.includes(n),user:o[a.author],question:a}}))(A)),L=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.questionList;return console.log("Questions list",e),Object(z.jsx)("div",{children:e.map((function(e){return Object(z.jsx)("div",{children:Object(z.jsx)(E,{id:e})},e)}))})}}]),n}(o.Component);var D=Object(j.connect)((function(e,t){var n=e.authedUser,o=e.users,s=e.questions,a=t.type,r=o[n],c=Object.keys(r.answers),i=Object.keys(s).sort((function(e,t){return s[t].timestamp-s[e].timestamp}));if(console.log("IDS",i),"unanswered"===a){var u=Object(R.a)(i);return console.log("WTF???",u),{currentUser:r,questionList:u.filter((function(e){return!c.includes(e)}))}}if("answered"===a)return{currentUser:r,questionList:Object(R.a)(i).filter((function(e){return c.includes(e)}))}}))(L),P=n(52),W=n(45);Object(j.connect)()((function(){var e=Object(o.useState)("unanswered"),t=Object(d.a)(e,2),n=t[0],s=t[1];return Object(z.jsxs)("div",{children:[Object(z.jsxs)(P.a,{activeKey:n,onSelect:function(e){return s(e)},className:"mb-3 question center",children:[Object(z.jsx)(W.a,{eventKey:"unanswered",title:"Unanswered questions"}),Object(z.jsx)(W.a,{eventKey:"answered",title:"Answered questions"})]}),Object(z.jsx)(D,{type:n})]})}));var V=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={optionOne:"",optionTwo:"",toHome:!1},e.handleChange=function(t){var n=t.target.value;e.setState((function(){return Object(h.a)(Object(h.a)({},e.state),{},Object(b.a)({},t.target.name,n))}))},e.handleSubmit=function(t){t.preventDefault(),console.log("Option one: ",e.state.optionOne),console.log("Option two: ",e.state.optionTwo);var n=e.props,o=n.dispatch,s=n.id;o(q(e.state.optionOne,e.state.optionTwo)),e.setState((function(){return{optionOne:"",optionTwo:"",toHome:!s}}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.optionOne,n=e.optionTwo;return!0===e.toHome?Object(z.jsx)(C.a,{to:"/"}):Object(z.jsxs)("div",{className:"container",children:[Object(z.jsx)("h3",{className:"center question bg",children:"Create New Question"}),Object(z.jsxs)("form",{className:"new-question question",onSubmit:this.handleSubmit,children:[Object(z.jsx)("p",{children:"Complete the question:"}),Object(z.jsx)("h3",{children:"Would you rather..."}),Object(z.jsx)("input",{placeholder:"Enter Option One Text Here",type:"text",name:"optionOne",value:t,onChange:this.handleChange,className:"textarea",maxLength:280}),Object(z.jsx)("p",{className:"center",children:"OR"}),Object(z.jsx)("input",{placeholder:"Enter Option Two Text Here",type:"text",name:"optionTwo",value:n,onChange:this.handleChange,className:"textarea",maxLength:280}),Object(z.jsx)("button",{className:"btn",type:"submit",children:"Submit"})]})]})}}]),n}(o.Component),_=(Object(j.connect)()(V),function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={answer:"",toResults:!1},e.onRadioChange=function(t){var n=t.target.value;e.setState((function(){return{answer:n}}))},e.formSubmit=function(t){t.preventDefault();var n=e.state.answer,o=e.props,s=o.dispatch,a=o.id;s(T(n,o.authedUser,a)),e.setState((function(){return{answer:"",toResults:!!a}}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.answer,n=e.toResults,o=this.props,s=o.optionOneText,a=o.optionTwoText,r=o.user,c=o.id,i=r.name,u=r.avatarURL;return!0===n?Object(z.jsx)(C.a,{to:"/results/".concat(c)}):Object(z.jsxs)("div",{className:"question",children:[Object(z.jsx)("div",{children:Object(z.jsxs)("span",{children:[i," asks: "]})}),Object(z.jsxs)("div",{className:"question-info",children:[Object(z.jsx)("img",{src:u,alt:"Avatar of ".concat(i),className:"avatar"}),Object(z.jsxs)("div",{children:[Object(z.jsx)("h5",{children:"Would You Rather..."}),Object(z.jsxs)("form",{className:"vote-form",onSubmit:this.formSubmit,children:[Object(z.jsx)("div",{className:"radio",children:Object(z.jsxs)("label",{children:[Object(z.jsx)("input",{type:"radio",value:"optionOne",checked:"optionOne"===t,onChange:this.onRadioChange}),s]})}),Object(z.jsx)("div",{className:"radio",children:Object(z.jsxs)("label",{children:[Object(z.jsx)("input",{type:"radio",value:"optionTwo",checked:"optionTwo"===t,onChange:this.onRadioChange}),a]})}),Object(z.jsx)("button",{className:"btn",type:"submit",children:"Submit"})]})]})]})]})}}]),n}(o.Component));Object(j.connect)((function(e,t){var n=e.authedUser,o=e.questions,s=e.users;console.log("props",t);var a=t.match.params.id,r=o[a];console.log("question",r);var c=r.optionOne.text,i=r.optionTwo.text,u=s[r.author];return console.log("this is the author: ",u),Object(b.a)({id:a,question:r,optionOneText:c,optionTwoText:i,user:u,authedUser:n},"question",r?m(c):null)}))(_);var H=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.optionOneText,n=e.optionTwoText,o=e.optionOneVotes,s=e.optionTwoVotes,a=e.user,r=e.users,c=(e.question,e.authedUser),i=Object.keys(r).length,u=o.find((function(e){return e===c})),l=s.find((function(e){return e===c})),j=I(o.length,i),d=I(s.length,i),b=a.name,h=a.avatarURL;return Object(z.jsxs)("div",{className:"question question-results",children:[Object(z.jsx)("div",{className:"results-authorName",children:Object(z.jsxs)("span",{children:["Asked by ",b]})}),Object(z.jsxs)("div",{className:"results-grid",children:[Object(z.jsx)("div",{className:"results-author-img",children:Object(z.jsx)("img",{src:h,alt:"Avatar of ".concat(b),className:"avatar"})}),Object(z.jsxs)("div",{className:"results-side-count",children:[Object(z.jsx)("h3",{className:"results-title",children:"Results:"}),Object(z.jsxs)("div",{className:"chart",children:[Object(z.jsxs)("span",{className:u?"your-vote":"none",children:["Your ",Object(z.jsx)("br",{}),"Vote"]}),Object(z.jsxs)("h3",{children:["Would you rather ",t,"?"]}),Object(z.jsx)("div",{children:Object(z.jsx)("div",{id:"option-1",className:"option",children:Object(z.jsx)("div",{className:"results",children:Object(z.jsx)("div",{className:"on",style:{width:"".concat(j,"%")},children:Object(z.jsx)("span",{className:"count",children:Object(z.jsx)("p",{children:"".concat(j,"%")})})})})})}),Object(z.jsx)("p",{children:"".concat(o.length," out of ").concat(i," votes")})]}),Object(z.jsxs)("div",{className:"chart",children:[Object(z.jsxs)("span",{className:l?"your-vote optTwo":"none",children:["Your ",Object(z.jsx)("br",{}),"Vote"]}),Object(z.jsxs)("h3",{children:["Would you rather ",n,"?"]}),Object(z.jsx)("div",{children:Object(z.jsx)("div",{id:"option-2",className:"option",children:Object(z.jsx)("div",{className:"results",children:Object(z.jsx)("div",{className:"on",style:{width:"".concat(d,"%")},children:Object(z.jsx)("span",{className:"count",children:Object(z.jsx)("p",{children:"".concat(d,"%")})})})})})}),Object(z.jsx)("p",{children:"".concat(s.length," out of ").concat(i," votes")})]})]})]})]})}}]),n}(o.Component);function I(e,t){return Math.floor(100*e/t)}Object(j.connect)((function(e,t){var n=e.authedUser,o=e.questions,s=e.users,a=o[t.match.params.id];console.log("this is the question info: ",a);var r=a.optionOne.text,c=a.optionTwo.text,i=a.optionOne.votes,u=a.optionTwo.votes,l=s[a.author];return console.log("This is user info",l.id),Object(b.a)({authedUser:n,question:a,optionOneText:r,optionTwoText:c,optionOneVotes:i,optionTwoVotes:u,user:l,users:s},"question",a?m(r):null)}))(H);var K=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.usersList;return Object(z.jsx)("div",{className:"question leaderboard",children:e.map((function(e,t){var n=e.name,o=e.avatarURL,s=e.answers,a=e.questions,r=Object.keys(s).length,c=a.length,i=r+c;return Object(z.jsx)("div",{className:"board",children:Object(z.jsxs)("div",{className:"leaderboard-grid",children:[Object(z.jsx)("div",{className:"leaderboard-img",children:Object(z.jsx)("img",{src:o,alt:"Avatar of ".concat(n),className:"avatar"})}),Object(z.jsxs)("div",{className:"leaderboard-info",children:[Object(z.jsx)("h3",{children:n}),Object(z.jsxs)("p",{children:["Answered Questions: ",r]}),Object(z.jsx)("hr",{}),Object(z.jsxs)("p",{children:["Created Questions: ",c]})]}),Object(z.jsxs)("div",{className:"score",children:[Object(z.jsx)("p",{children:"Score"}),Object(z.jsx)("div",{className:"score-shape",children:Object(z.jsx)("span",{children:i})})]})]})},t)}))})}}]),n}(o.Component);Object(j.connect)((function(e){var t=e.users;return console.log("users",t),{usersList:Object.values(t)}}))(K);var Q=n(53),Y=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(z.jsxs)("div",{className:"sign-form",children:[Object(z.jsx)("h3",{children:"Welsome to the Would You Rather App!"}),Object(z.jsx)("p",{children:"Please sign in to continue"}),Object(z.jsx)("img",{src:"https://miro.medium.com/max/600/1*i1yreXvK0kGrS9_uy5qKHQ.jpeg",alt:"react-redux-logo",className:"logo"}),Object(z.jsxs)(Q.a.Select,{"aria-label":"Default select example",children:[Object(z.jsx)("option",{children:"Open this select menu"}),Object(z.jsx)("option",{value:"1",children:"One"}),Object(z.jsx)("option",{value:"2",children:"Two"}),Object(z.jsx)("option",{value:"3",children:"Three"})]})]})}}]),n}(o.Component);var J=Object(j.connect)()(Y),G=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(k())}},{key:"render",value:function(){return Object(z.jsx)(l.a,{children:Object(z.jsxs)(o.Fragment,{children:[Object(z.jsx)(S.a,{}),Object(z.jsx)("div",{className:"container",children:!0===this.props.loading?null:Object(z.jsx)("div",{children:Object(z.jsx)(J,{})})})]})})}}]),n}(o.Component);var M=Object(j.connect)((function(e){return{loading:null===e.authedUser}}))(G),B=n(27);var F=Object(B.b)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===N?t.id:e},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(h.a)(Object(h.a)({},e),t.users);case g:return console.log("state",e),Object(h.a)(Object(h.a)({},e),{},Object(b.a)({},t.question.author,Object(h.a)(Object(h.a)({},e[t.question.author]),{},{questions:e[t.question.author].questions.concat([t.question.id])})));case y:var n={};return n[t.answer.qid]=t.answer.answer,Object(h.a)(Object(h.a)({},e),{},Object(b.a)({},t.answer.authedUser,Object(h.a)(Object(h.a)({},e[t.answer.authedUser]),{},{answers:Object.assign(n,e[t.answer.authedUser].answers)})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(h.a)(Object(h.a)({},e),t.questions);case g:return Object(h.a)(Object(h.a)({},e),{},Object(b.a)({},t.question.id,t.question));case y:return console.log("ACTION",e,t),Object(h.a)(Object(h.a)({},e),{},Object(b.a)({},t.answer.qid,Object(h.a)(Object(h.a)({},e[t.answer.qid]),{},Object(b.a)({},t.answer.answer,Object(h.a)(Object(h.a)({},e[t.answer.qid][t.answer.answer]),{},{votes:e[t.answer.qid][t.answer.answer].votes.concat([t.answer.authedUser])})))));default:return e}},loadingBar:U.loadingBarReducer}),X=n(51),$=function(e){return function(t){return function(n){console.group(n.type),console.log("The action is: ",n);var o=t(n);return console.log("The new state is: ",e.getState()),console.groupEnd(),o}}},Z=Object(B.a)(X.a,$),ee=Object(B.c)(F,Z);a.a.render(Object(z.jsx)(j.Provider,{store:ee,children:Object(z.jsx)(M,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.b975531d.chunk.js.map